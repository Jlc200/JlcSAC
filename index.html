<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JlcStore</title>
    <link rel="shortcut icon" href="" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
 <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        /* Personaliza tu CSS aquí */        
   /* header */
   .fv{
    color: #2b6dff;
    font-weight: bold;
    font-size: 1rem;
   }
  .op:hover{           
      border: 3px solid rgba(3,7,6,.2);
      border-radius: 1px; 
  }
     .cred {
      box-shadow: 1;
      border: 3px solid #4077ff;
     }
.txt-white{
 color: #FFF;
}
.lcolor{
background: #71bb2f;
}
.bg-color{
 background: #5597ff;
}
.bg-blus{
 color: #55c1ff;
}
#blus{
background-color: #55c1ff;
}
.active {
  color: #000000;
}

.hide{
 display: none;
}
.hl{
 display: block;
 float: left;
}
.nav-scroller{
 margin-left: 1rem;
 margin-right: 1rem; 
}

@media (min-width: 760px) {
.br{
 margin-left: 10px;
 margin-right: 10px;
}

.sder{
 margin-left: 5rem;
 margin-right: 5rem; 
}
.po{
 margin-left: 5rem;
 margin-right: 5rem; 
}
}

.ma{
 margin-top: 3px;
}

/*Lista del filtro*/
.nav-scroller {
        position: relative;
        z-index: 2;
        height: auto;
        max-width: px;
        overflow-y: hidden;
      }
.nav-scroller .nav {
        display: flex;
        flex-wrap: nowrap;
        padding-bottom: 0rem;
        margin-top: -1px;
        overflow-x: auto;
        text-align: center;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }
/* fin header */

/* Efecto slider */
#idicat [data-bs-target] {  
  background-color: #ffffff;
  width: 10px;
  height: 10px;
  border-radius: 50%;
}
#carousel-control-prev-icono {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23999'%3e%3cpath d='M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z'/%3e%3c/svg%3e");
}

#carousel-control-next-icono {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23999'%3e%3cpath d='M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
}

.cris{
 box-shadow: 0 25px 45px rgba(0,0,0,.3);
 border: 2px solid rgb(225,225,225,.3);
 background: rgba(1,1,1,0.2);
 backdrop-filter: blur(10px);
 transition: all 500ms ease-out;
 opacity: 0;
 visibility: hidden;
}
.cp:hover > .cris{
 opacity: 1;
 visibility: visible; 
}
.cp:hover > img{
transform: scale(0.5);
}
/* fin efecto slider */

/* catalogo */
.catalogo{
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: center;
  min-height: auto;
}
.producto{
  overflow: hidden;
  position: relative;
  height: 350px;
  width: 300px;
  margin: 15px;  
  border-radius: 15px; 
  box-shadow: 0px 15px 25px rgba(1,1,1,0.50);
 cursor: pointer;
}
.producto .front img{
  transition: all 500ms ease-out;
  width: 100%;
  height: 100%; 
}
.producto .front h1{
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 45px;
  line-height: 50px;  
  color: black;
  background: rgba(225,225,225,.5);
  box-shadow: 0 5px 10px rgba(0,0,0,.2);
  border: 2px solid rgb(225,225,225,.1);
  backdrop-filter: blur(10px);
  text-align: center;
  margin-bottom: 0;
}
.producto .back{
  padding: 15px;
  color: #f3f3f3;  
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  border-radius: 15px;
  position: absolute;
  top: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  visibility: hidden;
  background: rgba(1,1,1,0.6);
  backdrop-filter: blur(5px);
  transition: all 500ms ease-out;
  text-align: center;
}

.producto:hover .back{
  visibility: visible;
  opacity: 1;
}
.producto:hover img{
 transform: scale(1.2);
}
.bor{
 border-radius: 10;
}
/* fin catalogo */
/* animacion de texto */

.ftxt{
 /* text-transform: uppercase; */
 user-select: none;
 font-size: 1rem; 
 cursor: pointer;
 transition: .3 linear;
 color: transparent;
 -webkit-text-stroke: 0.2px #000;
 background-image: linear-gradient(to left, white, #f9f9f9, #000000, #000000);
background-size: 200%;
-webkit-background-clip: text;
animation: move 60s linear infinite;
}
@keyframes move {
 100%{
  background-position: 2000px 0;
 }
}

.ftxt:hover{
 color: #000;
 text-shadow:  0 0 10px rgba(0,1,2,.5),
               0 0 20px rgba(0,1,2,.5),
               0 0 40px rgba(0,1,2,.5),
               0 0 80px rgba(0,1,2,.5),
               0 0 160px rgba(0,1,2,.5),
               0 0 320px rgba(0,1,2,.5);
}
/* fin efecto de txt */

/* footer */
.SbTxC{
 color: whitesmoke;
 text-decoration: none;
 font-weight: bold;
}
.SbTxC:hover{
 color: #55c1ff;
}

  .sder {    
    width: ;
    height: auto;
    margin-left: 1rem;
    margin-right: 1rem; 
    overflow: hidden;
}

.sder .slide-track {
    display: flex;
    animation: scroll 40s linear infinite;
    -webkit-animation: scroll 40s linear infinite;
    width: calc(100px * 14);
}

.sder .sde {
display: flex;
    width: 200px;
}

.sder .sde img {
    width: 100%;
}

@keyframes scroll {
    0% {
        -webkit-transform: translateX(0);
        transform: translateX(0);
    }
    100% {
        -webkit-transform: translateX(calc(-200px * 7));
        transform: translateX(calc(-200px * 7));
    }
}
    </style>
     <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="search" fill="#ffffff" viewBox="0 0 16 16">
    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
  </symbol></svg>
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-primary">
            <div class="container-fluid">
                <div class="">
                    <div class="m-3 mb-0 mt-0">
                        <img src="https://cdn-icons-png.flaticon.com/512/862/862072.png" height="30" alt="Logo">
                    </div>
                    <h6><strong class="text-light">JlcStore</strong></h6>
                </div>
                 <div  class="btn btn-outline-light text-light" data-bs-toggle="modal" data-bs-target="#usuarioModal">
                    <i class="fas fa-user"></i>
                    
                </div>
                
                <div class="br" data-bs-toggle="modal" data-bs-target="#carritoModal" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">                 
                   <img src="https://siamangtec.files.wordpress.com/2022/08/tiendaonline-3.png" alt="CARRITO" class="border rounded-2 border-light-subtle" width="40" height="40" type="button">
                    <span id="carritoContador" class="badge bg-danger">0</span>
                </div>
                                                  
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
                    <span class=""><svg class="bi" width="25" height="25"><use xlink:href="#search"/></svg></span>
                </button>
                               
                <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
                    <form class="br ma" role="search">
                        <input class="form-control  text-center me-2" type="text" placeholder="BUSCAR..." aria-label="Search" style="font-weight: bold;" id="filterInput">
                    </form>
                </div>      
                
            </div>        
        </nav>
    </header>
    <!-- modal user -->
     <!-- Modal para Registro/Detalles de Usuario -->
    <div class="modal fade" id="usuarioModal" tabindex="-1" aria-labelledby="usuarioModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="usuarioModalLabel"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="formRegistro">
                        <div class="mb-3">
                            <label for="nombre" class="form-label">Nombre y Apellidos:</label>
                            <input type="text" class="form-control" id="nombre" placeholder="Ingrese su nombre completo">
                        </div>
                        <button type="submit" class="btn btn-primary float-end">Registrar</button>
                    </form>
                    <div id="detallesUsuario" style="display: none;">
                        <p>  <i class="fas text-success fa-user-check"></i> <strong> <span id="nombreUsuario"></span></strong> <button type="button" class="btn btn-outline-danger float-end" id="eliminarUsuario">Cerrar sesión</button></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Carrito -->
    <div class="modal fade" id="carritoModal" tabindex="-1" aria-labelledby="carritoModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="carritoModalLabel">Realizar compra</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="mt-3">
                 <form class="row g- m-2">
                   <div class="col-md-4"> <label for="nombre" class="form-label h6"> Cliente :</label> <input type="name" class="form-control was-validated" placeholder="Ingresa tu nombre" id="cliente" required> </div>
                <div class="modal-body table-responsive" id="carritoModalBody">
                    <!-- Contenido del Modal Carrito -->
                </div>
                </form>
                </div>
                
                <div class="d-grid">               
                    <button type="button" class="btn btn-outline-warning m-2" onclick="vaciarCarrito()">Vaciar Carrito</button>
                    <button type="submit" class="btn btn-outline-success m-2" onclick="enviarListaWhatsApp()">Enviar Compra</button>
                   <button type="button" class="btn btn-outline-primary m-2 hide" onclick="imprimirTicket()">Imprimir Ticket</button>
                </div>
            </div>
        </div>
    </div>
   

    <!-- Main Content -->
    <main class="mt-4">
         <section class="mt-1">
  <div class="container pt-5">
   
     
  <!-- carrusel img-->
  
   <div class="sder m-1 card">
        <div class="slide-track">
            <div class="sde">
             <img src="7.png" alt="">
             <img src="1.png" alt="">
             <img src="2.png" alt="">
             <img src="3.png" alt="">
             
             <img src="1.png" alt="">
             <img src="2.png" alt="">
             <img src="3.png" alt="">
             <img src="7.png" alt="">
            </div>
        </div>      
    </div>
  <!-- filtro de productos -->
     <div class="nav-scroller bg-light rounded-2  card" id="filt" >
    <nav class="nav" aria-label="Secondary navigation">
       
         
                        <div class="op" aria-current="page" data-filter="all" onclick="filtrarCategoria(this)">
                        <div class="mt-2">
                         <img height="50" src="https://lh3.googleusercontent.com/pw/AP1GczP0-kKpUcvE7hm3-BQiNdR_StLRHTgDP-oyJDlG2K5ultl7ZTjwaNdX6btW4G7oH1PRl3ZRYEkzZuvCsW1x5VclBAQzT7btMJI1S6EnhTwliyLw8B4">
                        </div>
                        <a class="nav-link txt fv">Todos</a>
                       </div>        
                       
                        <div class="op" data-filter="abarrotes" onclick="filtrarCategoria(this)">
                        <div class="mt-2">
                         <img height="50" src="https://lh3.googleusercontent.com/pw/AP1GczPCcGwxTMTLH215W75VI1EfbX1GRi39yCdrOu13kH-8LVC5xMMSJr8xoctdHeO-iknds9ZaSgE13QKMVMCVcxHeikhKJFQce6tsWFg8ja6nA1NTUBQ">
                        </div>
                        <a class="nav-link txt fv">Abarrotes</a>
                       </div>        
                       
                       
                       <div class="op" data-filter="bebidas" onclick="filtrarCategoria(this)">
                        <div class="mt-2">
                         <img height="50" src="https://lh3.googleusercontent.com/pw/AP1GczOmOgJ2HfLCBrkfSQld6t-KKd55sZicYXzukOZ3w6_vVOevEBacbpSicvONm-AZAoEwZxqJDoDkDbhQOT4B9lWiIfLHrtluY_vebPeDjoCHS0wW-vs">
                        </div>
                        <a class="nav-link txt fv">Bebidas</a>
                       </div>        
                       
                        <div class="op" data-filter="carnes" onclick="filtrarCategoria(this)">
                        <div class="mt-2">
                         <img height="50" src="https://lh3.googleusercontent.com/pw/AP1GczNf2b6W70ihHX45v6LgjDvB0iczMuYfdf8D1_q1DYRkdyRh2O9J5b_3weqSHMTj2P0hicCzKpXokf-ZAgzuf5ROna7s9djLHr7WARsCjBkxF9u4KJI">
                        </div>
                        <a class="nav-link txt fv">Carnes</a>
                       </div>        
                       
                        <div class="op" data-filter="conservas" onclick="filtrarCategoria(this)" >
                        <div class="mt-2">
                         <img height="50" src="https://lh3.googleusercontent.com/pw/AP1GczMU5B6TMQnOkjaRg6FuRxDi7oQC0GDpUuQ3MyBUZVaBSUBoCgOdsLgaINb3Dij8dQgHsSTRVAdNaFqFwriYOUZIYWTxup3ihp7AklcnmITb0ZkkoRA">
                        </div>
                        <a class="nav-link txt fv">Conservas</a>
                       </div>        
                                  
                            <div class="op" data-filter="escolar" onclick="filtrarCategoria(this)">
                        <div class="mt-2">
                         <img height="50" src="https://lh3.googleusercontent.com/pw/AP1GczMBmVGF7XHsdLDqocGrun2GUa40ix4dYApVhorLFoALc09JAazDjRUba-SJNPM0Rn2JyuyB6EotXrLJ8jCachIAKv447jM7cygeje0k079RZIGICKU">
                        </div>
                        <a class="nav-link txt fv">Escolar</a>
                       </div>                 
                                                                                                         
                       <div class="op" data-filter="frutas" onclick="filtrarCategoria(this)">
                        <div class="mt-2">
                         <img height="50" src="https://lh3.googleusercontent.com/pw/AP1GczPHzCVY0p7PtW8qh3UYyIxTrUKyflERoJ_Ysa0sB2lPryxCJwlb2ihdN2O6VXWQwg0mPzucMPiNf53HVAUiGY9gV27BKAI3ng6Ei59lUXaoa09ziAw">
                        </div>
                        <a class="nav-link txt fv">Frutas</a>
                       </div>     
                       
                       <div class="op" data-filter="higene" onclick="filtrarCategoria(this)">
                        <div class="mt-2">
                         <img height="50" src="https://lh3.googleusercontent.com/pw/AP1GczOe4CQ3wXA38_7EFRSqOSUu4uGBtejngZY5-FuUdBmieK3xWNi94Whpi8lbtL73z8dt-C_iQWvtWJ8-WFc1Kvd1hUfo9NZA3gC_ikjCOcaJ4gey9kM">
                        </div>
                        <a class="nav-link txt fv">Higene</a>
                       </div>        
                       
                        <div class="op" data-filter="hogar" onclick="filtrarCategoria(this)">
                        <div class="mt-2">
                         <img height="50" src="https://lh3.googleusercontent.com/pw/AP1GczOt8rCTqx_RtLv-8XD9ErVG_-EKiPoh-WlyOzu8xwVglDXAAOj3b2Nh97o-CPL2cx4dlxgMk5_M_AhdzUtBiBTzhamrDSkVI6S4jb0UASKSj6dSjEY">
                        </div>
                        <a class="nav-link txt fv">Hogar</a>
                       </div>        
                       
                        <div class="op" data-filter="lacteos" onclick="filtrarCategoria(this)">
                        <div class="mt-2">
                         <img height="50" src="https://lh3.googleusercontent.com/pw/AP1GczNBmlG4HDJbymVcNv5Zu6ZHQgqtK5OEBlpKUrNfX4f92VSxB7iiQyI7nn5bKqPt6rgmMFXOY1ydL0eh0zVFdDaBeSKxIixfjNRNsvxty5BK22zG3fY">
                        </div>
                        <a class="nav-link txt fv">Lacteos</a>
                       </div>        
                       
                        <div class="op" data-filter="limpieza" onclick="filtrarCategoria(this)">
                        <div class="mt-2">
                         <img height="50" src="https://lh3.googleusercontent.com/pw/AP1GczNIOllCeakcxwskoSKi8F5t6544kBQKUz65AAhfc-2DJ_Oj3vRvV1NrpkXH5gnAhbdQvS7vX2uDqotl163VpeNHH-5Ce8IkYVLU3vTBDoMjEDIwuqU">
                        </div>
                        <a class="nav-link txt fv">Limpieza</a>
                       </div>        
                       
                        <div class="op" data-filter="verduras" onclick="filtrarCategoria(this)">
                        <div class="mt-2">
                         <img height="50" src="https://lh3.googleusercontent.com/pw/AP1GczPtQFmO0XQv3RPp3RJFkGG3RsKtUh6cc9RpISw87fkYdcjQLM1nA-Yxr6UrnnHhmWZZt6OnqkTDek4Mnzahz8j9P5fuSXgUjFAisolOLNllmtlj2RU">
                        </div>
                        <a class="nav-link txt fv">Verduras</a>
                       </div>                                                                                                                 
    </nav>
</div>
  </section>
        <!-- Catálogo de Productos -->
     
            <div class="catalogo" id="contenedor-productos">
                <!-- Los productos se insertarán aquí desde JavaScript -->
            </div>
      
    </main>
  <div class="footer mt-auto  bg-dark text-light">
 <footer class="py-1 my-1">
    <ul class="nav justify-content-center">
      <li class="nav-item"><a href="#" class="nav-link px-2 text-light"><h6>Zona de covertura</h6></a></li>
      <li class="nav-item"><a href="#" class="nav-link px-2 text-light"><h6>Cambios y devoluciones</h6></a></li>
      <li class="nav-item"><a href="#" class="nav-link px-2 text-light"><h6>Política de privacidad</h6></a></li>
      <li class="nav-item"><a href="#" class="nav-link px-2 text-light"><h6>Términos y condiciones</h6></a></li>
      <li class="nav-item"><a href="#" class="nav-link px-2 text-light"><h6>Acerca de nosotros</h6></a></li>
      <li class="nav-item"><a href="#" class="nav-link px-2 text-light"><h6>Contactanos</h6></a></li>
    </ul>
    <div class="d-flex flex-column flex-sm-row justify-content-center align-items-center pt-4 mt-4 border-top">
     <ul class="list-unstyled d-flex">       
        <li class="ms-3"><a class="link-body-emphasis" href="inicio.html"><img class="bi"src="https://videonot.es/wp-content/uploads/2021/11/clicdata_support-help-center-header.png" alt="AYUDA"  width="38" height="38"></a></li>
        
        <li class="ms-3"><a class="link-body-emphasis" href="http://api.whatsapp.com/send?phone=51931993482&text= "><img class="bi"src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/1200px-WhatsApp.svg.png" alt="WhatsApp"  width="38" height="38"></a></li>
        
        <li class="ms-3 me-3"><a class="link-body-emphasis" href="#"><img class="bi"src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/2021_Facebook_icon.svg/220px-2021_Facebook_icon.svg.png" alt="Facebook"  width="38" height="38"></a></li>        
      </ul>
     
      <p class="text-center">&copy; 2020-2024 JlcStore, Todos los derechos reservados.</p>      
    </div>
    
  </footer>
  </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script> 
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="stock.js"></script>
   <script src="rus.js"></script>
    <script>                  
// Funciones JavaScript para el eCommerce
// Wait for the DOM to be fully loaded
        window.addEventListener('DOMContentLoaded', function() {
            // Get the modal element
            var usuarioModal = document.getElementById('usuarioModal');
            // Get the form element
            var formRegistro = document.getElementById('formRegistro');
            // Get the button element
            var eliminarUsuario = document.getElementById('eliminarUsuario');

            // Function to update modal content based on user registration
            function updateModalContent() {
                var nombreGuardado = localStorage.getItem('nombreUsuario');
                if (nombreGuardado) {
                    usuarioModal.querySelector('.modal-title').textContent = 'Tus Datos';
                    formRegistro.style.display = 'none';
                    document.getElementById('detallesUsuario').style.display = 'block';
                    document.getElementById('nombreUsuario').textContent = nombreGuardado;
                } else {
                    usuarioModal.querySelector('.modal-title').textContent = 'Registrar Usuario';
                    formRegistro.style.display = 'block';
                    document.getElementById('detallesUsuario').style.display = 'none';
                }
            }

            // Call updateModalContent initially to set the correct state
            updateModalContent();

            // Add an event listener for the 'show.bs.modal' event
            usuarioModal.addEventListener('show.bs.modal', function() {
                // Update modal content on each show
                updateModalContent();
            });

            // Add an event listener for the 'submit' event
            formRegistro.addEventListener('submit', function(event) {
                event.preventDefault();
                var nombre = document.getElementById('nombre').value;
                localStorage.setItem('nombreUsuario', nombre);
                // Update modal content after registration
                updateModalContent();
            });

            // Add an event listener for the 'click' event
            eliminarUsuario.addEventListener('click', function() {
                localStorage.removeItem('nombreUsuario');
                usuarioModal.hide();
                // Update modal content after logout
                updateModalContent();
            });

            // Rellenar el input cliente
            var nombreUsuario = localStorage.getItem('nombreUsuario');
            if (nombreUsuario) {
                document.getElementById('cliente').value = nombreUsuario;
            }
        });
        
        <!-- carrito -->

let carrito = [];
let totalGeneral = 0;

// Función para agregar un producto al carrito
function agregarProductoAlCarrito(producto) {
    // Verificar si el producto ya está en el carrito
    const productoExistente = carrito.find(item => item.id === producto.id);
    if (productoExistente) {
        // Si el producto ya existe, aumentar la cantidad       
        productoExistente.cantidad++;
    } else {
        // Si el producto es nuevo, agregarlo al carrito con cantidad 1
        producto.cantidad = 1;
        carrito.push(producto);
    }
    actualizarCarrito();
    // Actualizar el modal del carrito
    mostrarCarritoModal(); 
    
   
Swal.fire({ title: "Producto agregado!",
  text: 'El producto ' + producto.marca + ' se ha agregado correctamente.',
   icon: "success", 
   showConfirmButton: false,
   timer:1500
   });
}

// Función para actualizar el contador del carrito
function actualizarCarrito() {
    const contadorCarrito = document.getElementById('carritoContador');
    contadorCarrito.textContent = carrito.length;
    localStorage.setItem('carrito', JSON.stringify(carrito));
}

// Función para vaciar el carrito
function vaciarCarrito() {
    carrito = [];
    actualizarCarrito();
    // Limpiar el contenido del modal y mostrar mensaje de carrito vacío
    const modalBody = document.getElementById('carritoModalBody');
    modalBody.innerHTML = '<p class="text-center">Tu carrito está vacío.</p>';
}

// Función para calcular el subtotal de un producto
function calcularSubtotalProducto(producto) {
    return producto.precio * producto.cantidad;
}

// Función para calcular el total general del carrito
function calcularTotalGeneral() {
    totalGeneral = carrito.reduce((total, producto) => total + calcularSubtotalProducto(producto), 0);
    return totalGeneral;
}

// Función para mostrar el carrito en el modal
function mostrarCarritoModal() {
    const modalBody = document.getElementById('carritoModalBody');
    modalBody.innerHTML = ''; // Limpiar el contenido anterior del modal
    if (carrito.length === 0) {
        modalBody.innerHTML = '<p class="text-center">Tu carrito está vacío.</p>';
        return;
    }
    // Mostrar los productos del carrito con opciones de edición y eliminar
    const table = document.createElement('table');
    table.classList.add('table','form-group');
    table.innerHTML = `
        <thead>
            <tr>
                <th>Imagen</th>
                <th>Producto</th>
                <th>Precio</th>
                <th>Cantidad</th>
                <th>Subtotal</th>
                <th>Eliminar</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    `;
    const tbody = table.querySelector('tbody');
    carrito.forEach(producto => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td><img src="${producto.imagen}" alt="${producto.marca}" width="50"></td>
            <td>${producto.marca}</td>
            <td>${producto.precio.toFixed(2)}</td>
            <td>
                <input type="number" class="form-control" value="${producto.cantidad}" min="1" onchange="actualizarCantidadProducto(${producto.id}, this.value)">
            </td>
            <td>${calcularSubtotalProducto(producto).toFixed(2)}</td>
            <td><button type="button" class="btn btn-danger" onclick="eliminarProductoDelCarrito(${producto.id})">Eliminar</button></td>
        `;
        tbody.appendChild(row);
    });
    // Calcular y mostrar el subtotal general, el IGV y el total
    const totalGeneral = calcularTotalGeneral();
    const igv = totalGeneral * 0.18;
    const total = totalGeneral - igv;
    const divTotales = document.createElement('div');
    divTotales.innerHTML = `
        <p class="text-end">Subtotal: S/. ${total.toFixed(2)}</p>
        <p class="text-end">IGV (18%): S/. ${igv.toFixed(2)}</p>
        <p class="text-end h4" id="ts">Total: S/. ${totalGeneral.toFixed(2)}</p>
    `;
    modalBody.appendChild(table);
    modalBody.appendChild(divTotales);
}

// Función para actualizar la cantidad de un producto en el carrito
function actualizarCantidadProducto(id, cantidad) {
    const producto = carrito.find(item => item.id === id);
    if (producto) {
        // Validación de la cantidad
        if (cantidad < 1) {
            cantidad = 1; // Cantidad mínima de 1
            <!-- alert("La cantidad mínima es 1."); -->
        }
        producto.cantidad = cantidad;
        // Actualizar el modal del carrito
        mostrarCarritoModal();
        // Actualizar el almacenamiento local
        localStorage.setItem('carrito', JSON.stringify(carrito));
    }
}

// Función para eliminar un producto del carrito
function eliminarProductoDelCarrito(id) {
    carrito = carrito.filter(item => item.id !== id);
    actualizarCarrito();
    // Actualizar el modal del carrito
    mostrarCarritoModal();
}

// Función para enviar la lista de productos seleccionados a WhatsApp
function enviarListaWhatsApp() {
let cliente = document.getElementById('cliente');
if (carrito.length === 0) {
//sweetslert
const Toast = Swal.mixin({
  toast: true,
  position: "top-end",
  showConfirmButton: false,
  timer: 3000,
  timerProgressBar: true,
  didOpen: (toast) => {
    toast.onmouseenter = Swal.stopTimer;
    toast.onmouseleave = Swal.resumeTimer;
  }
});
Toast.fire({
  icon: "warning",
  title:"CARRITO VACÍO", 
  text: "Tu carrito está vacío. Por favor, agrega productos."
});
setTimeout(() => {
                            
    window.location = "index.html";
                        }, 3000);
    
    return; // Detener la ejecución de la función
  }else if(cliente.value === '') {
   cliente.focus();
   
   Swal.fire({
                    title: "NOMBRE VACÍO",
                    text: 'Ingresa tu nombre en el campo requerido',
                    icon: "warning",
                    showConfirmButton: false,
                    timer: 2000
                });
   return;
  }else{
//para obtener fecha y hora 
//%0A*Fecha:* ${new Date().toLocaleDateString()} %0A*Hora:* ${new Date().toLocaleTimeString()}

  // Obtener la lista de productos del carrito
  const productos = carrito.map(producto => `*Producto:* ${producto.marca}%0A*Cantidad:* ${producto.cantidad}%0A*Precio:* S/ ${producto.precio}%0A*Subtotal:* S/ ${(producto.precio * producto.cantidad).toFixed(2)}%0A`).join('%0A');

let rCompra = carrito.map(producto => `*${producto.cantidad} -> ${(producto.marca).toUpperCase()} : : 00`).join('%0A');

  // Formatear el mensaje para WhatsApp
  let t=p
  let total = calcularTotalGeneral();
  let igv = total * 0.18;
  let subtotal = totalGeneral - igv;
  const mensaje = `*COTIZACIÓN:* ${boletaContador} %0A----------------------------------------
%0A*Cliente:* ${cliente.value}
%0A----------------------------------------
%0A${productos}
----------------------------------------
%0A*Subtotal:* S/ ${subtotal.toFixed(2)}
%0A*IGV:* S/ ${igv.toFixed(2)}%0A
*Total a pagar: S/ ${total.toFixed(2)}*
%0A----------------------------------------
%0A${rCompra}`;

  // Abrir WhatsApp con el mensaje predefinido
  const url = `https://api.whatsapp.com/send?phone=51${t}&text=${(mensaje)}`;
  window.open(url, '_blank');
  cliente.value=''
  window.location = "index.html";
  // Limpiar el localStorage después de enviar el pedido
  localStorage.removeItem('carrito');
  // Vaciar el carrito
  vaciarCarrito();
}  
} 
//Función para inicializar el catálogo de productos desde un arreglo
function inicializarCatalogoProductos(productos) {
    const contenedorProductos = document.getElementById('contenedor-productos');
    contenedorProductos.innerHTML = ''; // Limpiar el contenido anterior

// Ordenar el arreglo de productos de forma aleatoria
  productos.sort(() => 0.5 - Math.random());

    productos.forEach((producto) => {
        const div = document.createElement('div');
        div.classList.add('producto', `category-${producto.categoria}`);

        // Verificar la disponibilidad del producto
        if (producto.disponible === "DISPONIBLE") {
            div.innerHTML = `
                <div class="face front">
                    <img class="cimg" src="${producto.imagen}" alt="${producto.marca}">
                    <h1>S/. <span>${producto.precio}</span></h1>
                </div>
                <div class="face back">
                    <h4 class="name my-0 font-weight-bold">${producto.marca}</h4>
                    <ul class="list-unstyled mt-3 mb-4">
                        ${producto.detalles.map((ele) => `<li>${ele}</li>`).join("")}
                    </ul>
                    <h5>${producto.disponible}</h5>
                    <h1 class="card-title pricing-card-title precio">S/. <span>${producto.precio}</span></h1>
                    <a href="#" class="btn btn-block btn-success agregar-carrito" data-id="${producto.id}">Comprar</a>
                </div>
            `;
        } else {
            // Si el producto está agotado, mostrar un mensaje de alerta
            div.innerHTML = `
                <div class="face front">
                    <img class="img" src="${producto.imagen}" alt="${producto.marca}">
                    <h1>S/. <span>${producto.precio}</span></h1>
                </div>
                <div class="face back">
                    <h4 class="name my-0 font-weight-bold">${producto.marca}</h4>
                    <ul class="list-unstyled mt-3 mb-4">
                        ${producto.detalles.map((ele) => `<li>${ele}</li>`).join("")}
                    </ul>
                    <h5>${producto.disponible}</h5>
                    <h1 class="card-title pricing-card-title precio">S/. <span>${producto.precio}</span></h1>
                    <button class="btn btn-block btn-secondary disabled" disabled>Agotado</button>
                </div>
            `;
        }

        contenedorProductos.appendChild(div);
    });

    // Agregar evento click a los botones "Comprar"
    const botonesComprar = document.querySelectorAll('.agregar-carrito');
    botonesComprar.forEach(boton => {
        boton.addEventListener('click', (event) => {
            event.preventDefault(); // Evitar el comportamiento por defecto del enlace
            const idProducto = parseInt(boton.dataset.id);
            const producto = productos.find(item => item.id === idProducto);

            // Agregar el producto al carrito solo si está disponible
            if (producto.disponible === "DISPONIBLE") {
                agregarProductoAlCarrito(producto);
            } else {
                // Mostrar una alerta si el producto está agotado
                Swal.fire({
                    title: "Producto Agotado",
                    text: 'El producto ' + producto.marca + ' está agotado.',
                    icon: "warning",
                    showConfirmButton: true,
                    timer: 2000
                });
            }
        });
    });
}

// Inicializar catálogo de productos al cargar la página
window.addEventListener('load', () => {
    inicializarCatalogoProductos(stockProductos);
    // Cargar el carrito desde el local storage
    const carritoLocalStorage = localStorage.getItem('carrito');
    if (carritoLocalStorage) {
        carrito = JSON.parse(carritoLocalStorage);
        actualizarCarrito();
        mostrarCarritoModal();
    }
}); 

// Filtro de Productos
// Agregar evento keyup al campo de búsqueda
const campoBusqueda = document.getElementById('filterInput');
campoBusqueda.addEventListener('keyup', (event) => {
  const busqueda = event.target.value.toLowerCase();
  filtrarProductos(busqueda);
});

// Función para filtrar productos
function filtrarProductos(filtro) {
  const productos = document.querySelectorAll('.producto');
  productos.forEach(producto => {
    const nombreProducto = producto.querySelector('.name').textContent.toLowerCase();
    if (filtro === 'all' || nombreProducto.includes(filtro)) { // Busca coincidencias parciales
      producto.style.display = 'block';
    } else {
      producto.style.display = 'none';
    }
  });
}

// Función para filtrar productos por categoría
function filtrarCategoria(enlace) {
    const categoria = enlace.dataset.filter;
    const productos = document.querySelectorAll('.producto');
    productos.forEach(producto => {
        if (categoria === 'all' || producto.classList.contains(`category-${categoria}`)) {
            producto.style.display = 'block';
        } else {
            producto.style.display = 'none';
        }
    });
}
/* genera número boleta*/a=08387941338/09
let boletaContador = Math.random().toString(4).substring(2, 10).toUpperCase();

/* esta función esta deshabilitada*/p=a
function generarTicket() {
 //boletaContador++; //Incrementa el contador
  // Obtener la lista de productos del carrito
  let cliente = document.getElementById('cliente').value;
  const productos = carrito.map(producto => `<tr><th>${producto.cantidad}</th>   <th>${producto.marca}</th>   <th>${producto.precio}</th> <th>S/  ${(producto.cantidad * producto.precio)}</th> </tr>`).join('<br>');
  // Calcular el total general del carrito
  const totalGeneral = calcularTotalGeneral();
 // Formatear el ticket como una cadena de texto
const ticket = `
     <center>INDUSTRIA DE LUJO S.A.C.  <br>
    AV. GRAL. GARZON NRO. 726 <br>
    JESUS MARIA - LIMA -LIMA <br>
    RUC : 20536825968 <br>
    ------------------------------------------------------- <br>
    TICKET DE VENTA <br>
  TN01-${boletaContador.toString().padStart(6, '0')} <br>
    F.EMISION ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()} <br>    
    CLIENTE: ${cliente} <br>-------------------------------------------------------<br><table><tr><th>CANT</th> <th>DESCRIPCIÓN</th> <th>P/U</th> <th>TOTAL</th> </tr> <br>
   
 ${productos}</table><br>-------------------------------------------------------<br>
 <table> 
   <tr> <th>SUBTOTAL</th> <th> S/ ${(totalGeneral - (totalGeneral * 0.18)).toFixed(2)} </th></tr>
    <tr><th>IGV</th><th> S/ ${(totalGeneral * 0.18).toFixed(2)}</th> </tr>
   <tr> <th>TOTAL</th> <th>S/ ${(totalGeneral).toFixed(2)}</th> </tr></table>
   <br>------------------------------------------------------- <br>
    Representacion impresa <br>
   de la Boleta de Venta Electronica. <br>
  Puede verificarla utilizando su <br>
  clave SOL.</center> <br>
`;
  // Mostrar el ticket en una nueva ventana
  const nuevaVentana = window.open('Ticket de Compra', 'width=100,height=400');
  nuevaVentana.document.write(ticket);
  nuevaVentana.document.close();
  return ticket;
}

function imprimirTicket() {
// Generar el ticket de compra
  generarTicket();
  guardarTicket();
  // Obtener la ventana del ticket
  const ticketWindow = window.open('Ticket de Compra', 'width=100,height=400');

  // Generar el ticket como una cadena de texto
  const ticket = generarTicket(); // Llama a la función para generar el ticket

  // Agregar el contenido del ticket a la ventana
  ticketWindow.document.write(ticket);
  ticketWindow.document.close(); // Cierra el documento para que se renderice

  // Imprimir el contenido de la ventana
  ticketWindow.print();
}

/* Función para guardar ticket en un archivo.txt */
function guardarTicket() {
  const ticket = generarTicket(); // Llama a la función para generar el ticket
  const textoTicket = ticket.replace(/<\/?(?:br|center|table|tr|th|td)>/g, '\b'); // Reemplaza las etiquetas por saltos de línea

  const blob = new Blob([textoTicket], { type: 'text/plain' });
  const url = window.URL.createObjectURL(blob);

  // Crea un enlace para descargar el archivo
  const link = document.createElement('a');
  link.href = url;
   // Personalizar el nombre del archivo con la hora actual
    const fileName = `COTIZACION-${boletaContador}.txt`;
  link.download = fileName; // Nombre del archivo a descargar

  // Simula un click en el enlace para descargar el archivo
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);

  // Libera el objeto URL
  window.URL.revokeObjectURL(url);
}
</script>
</body>
</html>
